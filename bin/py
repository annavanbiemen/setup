#!/bin/bash

# Exit on errors
set -euo pipefail

# Import libraries
source "$(dirname "$(dirname "$(realpath "${BASH_SOURCE[0]}")")")/lib/standard.sh"

# Run Python 3.14 with rich colors using uv
#
# Usage: py [arguments]
#
# Arguments:
#   arguments  Arguments to pass to Python
main() {
    # Check uvx availability
    if ! command -v uvx &> /dev/null; then
        standard::raise "Required 'uvx' command not found. Please run 'setup uv' first."
    fi

    # Python startup script
    PYTHONSTARTUP="$(dirname "$(dirname "$0")")/etc/pythonrc"
    export PYTHONSTARTUP

    # Download and invoke Python 3.14 using uvx
    uvx --python 3.14 --with rich -- python "$@"
}

main "$@"
